<!DOCTYPE html>
<html lang="ja">

<head>
  <script>
    try {
      const theme = localStorage.getItem('theme'); // ← これが必須
      if (theme === 'light') {
        document.documentElement.classList.remove('dark');
        document.body.classList.remove('dark');
      } else {
        document.documentElement.classList.add('dark');
        document.body.classList.add('dark');
      }
    } catch (e) {}
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>
    <nav>
      <button class="menu-toggle" aria-label="メニューを開く">&#9776;</button>
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="projects.html">Projects・Links</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li>
          <button id="theme-toggle" aria-label="change-theme" class="theme-toggle-btn">theme</button>
        </li>
      </ul>
    </nav>
  </header>

  <section id="contact">
    <h2>Contact</h2>
    <form class="contact-form" onsubmit="submitContactForm(event)">
      <label for="name">お名前</label>
      <input type="text" id="name" name="name" required>

      <label for="email">メールアドレス</label>
      <input type="email" id="email" name="email" required>

      <label for="message">メッセージ</label>
      <textarea id="message" name="message" rows="5" required></textarea>

      <button type="submit">送信</button>
    </form>
  </section>

  <!-- Firebase SDK（v9 Modular）を読み込み -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAA8_BwFbwJT6Ca4zVuiOHtQ8VLYO7BCGw",
      authDomain: "myhp-a6eb0.firebaseapp.com",
      projectId: "myhp-a6eb0",
      storageBucket: "myhp-a6eb0.firebasestorage.app",
      messagingSenderId: "915010238744",
      appId: "1:915010238744:web:6828ab1f63bc1efb3c066d",
      measurementId: "G-CFCTSTRVCH"
    };


    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.submitContactForm = async function (e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const message = document.getElementById('message').value;
      try {
        await addDoc(collection(db, "contacts"), {
          name, email, message, timestamp: new Date()
        });
        alert("送信しました！");
        e.target.reset();
      } catch (err) {
        alert("送信に失敗しました");
      }
    }
  </script>

  <script src="script.js"></script>
</body>

</html>